{% extends "base.html" %}
{% block content %}
<h2 class="text-center mb-3">Пошук</h2>

<form method="post" class="mb-4">
  <div class="w-50 mx-auto">
    <input type="text" name="query" placeholder="Введіть ім'я, дату або послугу" class="form-control mb-2">
    <button class="btn btn-custom w-100">Шукати</button>
  </div>
</form>

<div class="text-center mb-4">
  <a href="{{ url_for('patients') }}" class="btn btn-custom">Додати пацієнта</a>
</div>

{% if results %}
  <div class="row">
    <div class="col-12 col-md-6">
      <h5>Пацієнти</h5>
      <ul class="list-group mb-3">
        {% for p in results.patients %}
          <li class="list-group-item">{{ p.name }} — {{ p.age }} років</li>
        {% else %}
          <li class="list-group-item">Нічого не знайдено</li>
        {% endfor %}
      </ul>

      <h5>Лікарі</h5>
      <ul class="list-group mb-3">
        {% for d in results.doctors %}
          <li class="list-group-item">{{ d.name }} ({{ d.specialty }})</li>
        {% else %}
          <li class="list-group-item">Нічого не знайдено</li>
        {% endfor %}
      </ul>
    </div>

    <div class="col-12 col-md-6">
      <h5>Записи</h5>
      <ul class="list-group mb-3">
        {% for a in results.appointments %}
          <li class="list-group-item">{{ a.patient.name }} → {{ a.doctor.name }} ({{ a.date }})</li>
        {% else %}
          <li class="list-group-item">Нічого не знайдено</li>
        {% endfor %}
      </ul>

      <h5>Послуги</h5>
      <ul class="list-group mb-3">
        {% for s in results.services %}
          <li class="list-group-item">{{ s.name }} — {{ "%.2f"|format(s.price) }} грн</li>
        {% else %}
          <li class="list-group-item">Нічого не знайдено</li>
        {% endfor %}
      </ul>
    </div>
  </div>
{% endif %}
{% endblock %}